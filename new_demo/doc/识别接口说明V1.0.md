# 识别接口说明V1.0

## 算法调用流程

1.	初始化识别模块

2.	循环调用识别并获取识别结果

## 初始化

接口原型：

```c++
/**
 * @brief 初始化识别模块
 * @param model 模型路径
*/
Detection(const char * model);

/**
 * @brief 初始化
 * @param w 输入宽
 * @param h 输入高
 * @param nc 模型输出类别数量
 * @param snc 选取前n类
 * @param nms_threshold 阈值，默认0.6
*/
int init(int w, int h, int nc, int snc,float nms_threshold=0.6);
```

示例：

```c++
Detection detection("pdcar-20230508.rknn");
detection.init(320,224,4,4,0.6);
```



## 识别

接口原型：

```c++
/**
 * @brief 检测
 * @param input_data RGB图片原始数据
*/
int Detection::detect(unsigned char *input_data);

/**
 * @brief 获取检测结果
*/
std::vector<BoundingBox> Detection::getresult();

/**
 * @brief 识别框类型
 * @param x 识别框坐上角坐标 x
 * @param y 识别框坐上角坐标 y
 * @param w 宽
 * @param h 高
 * @param cx 中心点坐标
 * @param cy
 * @param confidence 置信度
 * @param classid 类别ID
*/
struct BoundingBox {
    float x, y, w, h, cx, cy;
    float confidence;
    int classid;
};
```



示例：
```c++
 detection.detect(&rgb_data);
 auto result = detection.getresult();
```
